import{k as R,i as j}from"./rmVoKyAr.js";import{_ as z}from"./CQfI-BCv.js";import{_ as Z}from"./lDY6AVwd.js";import{M as S}from"./B2TCpOrA.js";import{_ as U,M as A}from"./B83x48NT.js";import{D as I}from"./C8qT9uG5.js";import{r as K,c as N,w as X,G as Y,H as G,$ as i,a4 as e,F as b,ac as k,u as t,ad as h,D as g,X as _,V as l,ae as v,a5 as c,a6 as u}from"./Dg7Bj1Dn.js";import"./ByTfTYi2.js";import"./BDTnF8Yp.js";import"./_eVe-hpD.js";import"./vqpIx3q4.js";import"./smLjY0U4.js";import"./Bi9N8uqL.js";import"./OZUmrK_A.js";import"./CECZEjtU.js";import"./NGD3Z_RD.js";import"./CLFzEa0p.js";import"./DCj94CgU.js";import"./DP_f_eJI.js";import"./DvjpAFVN.js";import"./C1sj_x83.js";const O="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2012H12.01V12.01H12V12ZM12%205H12.01V5.01H12V5ZM12%2019H12.01V19.01H12V19Z'%20stroke='%23666666'%20stroke-width='3.4'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",F=""+new URL("pdf.CYVg6a77.png",import.meta.url).href,T="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2012C2%207.286%202%204.929%203.464%203.464C4.93%202%207.286%202%2012%202C16.714%202%2019.071%202%2020.535%203.464C22%204.93%2022%207.286%2022%2012C22%2016.714%2022%2019.071%2020.535%2020.535C19.072%2022%2016.714%2022%2012%2022C7.286%2022%204.929%2022%203.464%2020.535C2%2019.072%202%2016.714%202%2012Z'%20stroke='%23666666'%20stroke-width='1.5'%20/%3e%3cpath%20d='M16%2010C17.1046%2010%2018%209.10457%2018%208C18%206.89543%2017.1046%206%2016%206C14.8954%206%2014%206.89543%2014%208C14%209.10457%2014.8954%2010%2016%2010Z'%20stroke='%23666666'%20stroke-width='1.5'%20/%3e%3cpath%20d='M2%2012.5L3.752%2010.967C4.19114%2010.5831%204.75974%2010.3803%205.34272%2010.3998C5.9257%2010.4193%206.47949%2010.6596%206.892%2011.072L11.182%2015.362C11.5149%2015.6948%2011.9546%2015.8996%2012.4235%2015.9402C12.8925%2015.9808%2013.3608%2015.8547%2013.746%2015.584L14.045%2015.374C14.6006%2014.9838%2015.2721%2014.7936%2015.9498%2014.8344C16.6275%2014.8753%2017.2713%2015.1448%2017.776%2015.599L21%2018.5'%20stroke='%23666666'%20stroke-width='1.5'%20stroke-linecap='round'%20/%3e%3c/svg%3e",$=""+new URL("record_discard.DIaEkKLG.svg",import.meta.url).href,P="data:image/svg+xml,%3csvg%20fill='%23FFFFFF'%20width='800px'%20height='800px'%20viewBox='-9.5%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3ctitle%3erecord%3c/title%3e%3cpath%20d='M2.656%2011.25v-2.969c0-1.906%201.719-3.5%203.906-3.5%202.156%200%203.906%201.594%203.906%203.5v2.969h-7.813zM13.188%2011.438v5.969c-1.281%203.5-5.063%204.031-5.063%204.031v3.969h4.156v1.781h-11.438v-1.781h4.188v-3.969s-3.75-0.531-5.031-4.031v-5.969l1.531-0.719v5.438s0.469%203.656%205.031%203.656%205.094-3.656%205.094-3.656v-5.438zM10.469%2012.281v2.688c0%201.906-1.75%203.5-3.906%203.5-2.188%200-3.906-1.594-3.906-3.5v-2.688h7.813z'%3e%3c/path%3e%3c/svg%3e",J="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%202C6.47717%202%202%206.47717%202%2012C2%2017.5228%206.47717%2022%2012%2022C17.5228%2022%2022%2017.5228%2022%2012C22%206.47717%2017.5228%202%2012%202ZM18.1283%2018.1283C16.6087%2019.6433%2014.5795%2020.5383%2012.4361%2020.6389C10.2926%2020.7395%208.18853%2020.0386%206.53372%2018.6725C4.87891%2017.3065%203.79194%2015.3733%203.48462%2013.2497C3.17729%2011.126%203.67163%208.964%204.8713%207.18491C6.07097%205.40581%207.89003%204.13708%209.97405%203.62593C12.0581%203.11478%2014.2577%203.39782%2016.1445%204.41992C18.0312%205.44201%2019.4698%207.12993%2020.18%209.15478C20.8902%2011.1796%2020.8211%2013.3964%2019.9861%2015.373C19.551%2016.403%2018.92%2017.3387%2018.1283%2018.1283Z'%20fill='%23666666'%20/%3e%3cpath%20d='M7.6667%209.66666H9.33336V11.3333H7.6667V9.66666ZM14.6667%209.66666H16.3334V11.3333H14.6667V9.66666ZM15.4287%2014.1333C15.1709%2014.7841%2014.7229%2015.342%2014.1432%2015.7345C13.5636%2016.1269%2012.8792%2016.3356%2012.1792%2016.3333H11.8209C11.1209%2016.3356%2010.4364%2016.1269%209.85674%2015.7345C9.27707%2015.3421%208.82909%2014.7841%208.5712%2014.1333L8.51791%2014H7.08203L7.33336%2014.6284C7.69211%2015.5252%208.31136%2016.294%209.11124%2016.8356C9.91111%2017.3772%2010.8549%2017.6666%2011.8209%2017.6667H12.1792C13.1452%2017.6666%2014.089%2017.3772%2014.8888%2016.8356C15.6887%2016.294%2016.308%2015.5252%2016.6667%2014.6284L16.918%2014H15.482L15.4287%2014.1333Z'%20fill='%23666666'%20/%3e%3c/svg%3e",W="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3.29064%203.309C3.15208%203.25076%202.99922%203.23549%202.85188%203.26517C2.70454%203.29485%202.56952%203.36812%202.46432%203.47547C2.35912%203.58282%202.28861%203.71931%202.26192%203.86722C2.23523%204.01513%202.2536%204.16765%202.31464%204.305L5.40764%2011.25H12.9996C13.1986%2011.25%2013.3893%2011.329%2013.53%2011.4697C13.6706%2011.6103%2013.7496%2011.8011%2013.7496%2012C13.7496%2012.1989%2013.6706%2012.3897%2013.53%2012.5303C13.3893%2012.671%2013.1986%2012.75%2012.9996%2012.75H5.40764L2.31464%2019.695C2.2536%2019.8323%202.23523%2019.9849%202.26192%2020.1328C2.28861%2020.2807%202.35912%2020.4172%202.46432%2020.5245C2.56952%2020.6319%202.70454%2020.7052%202.85188%2020.7348C2.99922%2020.7645%203.15208%2020.7492%203.29064%2020.691L22.2906%2012.691C22.4265%2012.6337%2022.5425%2012.5375%2022.624%2012.4146C22.7056%2012.2917%2022.7491%2012.1475%2022.7491%2012C22.7491%2011.8525%2022.7056%2011.7083%2022.624%2011.5854C22.5425%2011.4625%2022.4265%2011.3663%2022.2906%2011.309L3.29064%203.309Z'%20fill='%23FF852E'%20/%3e%3c/svg%3e",q="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2010V13M6%206V17M10%203V21M14%208V15M18%205V18M22%2010V13'%20stroke='%23666666'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",Q=""+new URL("excel.BShIN0Wv.png",import.meta.url).href,e2=""+new URL("power.BnKtSJ9n.png",import.meta.url).href,t2={class:"flex space-x-6"},s2={class:"overflow-hidden overflow-y-auto max-h-[calc(100vh_-_160px)] w-[40%] bg-white rounded-lg px-5 pb-5"},o2=e("div",{class:"flex items-center sticky top-0 bg-white border-b border-[#EDEDED] h-[60px]"},[e("h1",{class:"text-[20px] font-semibold"},"Chat")],-1),r2=["onClick"],i2=e("img",{class:"h-12 w-12 rounded-full object-cover",src:z,alt:""},null,-1),l2={class:"w-full"},n2={class:"flex justify-between"},a2={class:"black_24 font-medium"},c2=e("p",{class:"text-[#666666] text-sm"},"15:33",-1),d2=e("p",{class:"text-[#919191] text-sm"},"Assalomu alaykum",-1),p2={class:"overflow-hidden overflow-y-auto max-h-[calc(100vh_-_160px)] w-[60%] bg-white rounded-lg"},_2=e("div",{class:"flex sticky top-0 z-20 bg-white items-center px-5 border-b border-[#EDEDED] justify-between h-[60px]"},[e("h1",null,"Barno Halilova"),e("img",{src:O,alt:""})],-1),u2={class:"space-y-2 min-h-[calc(100vh_-_300px)] px-5 pb-5 text-[#141F1A]"},m2=e("p",{class:"text-[#666666] text-center mb-3 mt-7"},"Bugun",-1),h2={key:0},g2={key:0,controls:""},f2=["src"],v2=["src"],w2={key:1,controls:""},x2=["src"],y2=["src"],C2=["href"],b2=["src"],k2={class:"text-xs font-medium"},F2={key:3},M2=["src"],L2={key:4},E2={class:"flex items-center gap-2 min-w-[150px] bg-[#F2F3F6] rounded-lg"},B2=e("img",{class:"h-8 w-8",src:F,alt:""},null,-1),V2={class:"text-xs font-medium"},D2={key:1,class:"whitespace-pre-wrap"},H2=e("p",{class:"text-[#999999] text-xs"},"15:33",-1),R2=["src"],j2=e("div",{id:"targetElement"},"Detecter",-1),z2={class:"sticky w-full -bottom-[1px] flex items-center gap-3 border-t px-5 bg-white border-[#EDEDED]"},Z2={key:0,for:"upload_image",class:"cursor-pointer"},S2=e("img",{src:T,alt:""},null,-1),U2=[S2],A2={key:3,class:"full_flex border w-full"},I2=e("img",{class:"-mt-8 recorder mx-auto bg-blue-600 rounded-full p-5 cursor-pointer",src:P,alt:""},null,-1),K2=[I2],N2={key:4,class:"cursor-pointer",src:J,alt:""},X2={class:"mb-2"},Y2={key:0,controls:""},G2=["src"],O2=["src"],T2={key:1,controls:""},$2=["src"],P2=["src"],J2={key:2,class:"flex items-center gap-2 bg-[#F2F3F6] rounded-lg p-[10px]"},W2=["src"],q2={class:"text-xs font-medium"},Q2={key:3,class:"full_flex"},ee=["src"],te={key:4},se={class:"flex items-center gap-2 bg-[#F2F3F6] rounded-lg p-[10px]"},oe=e("img",{class:"h-8 w-8",src:F,alt:""},null,-1),re={class:"text-xs font-medium"},ie={class:"mt-2 space-y-2"},le=e("label",{for:"caption"},"Caption",-1),ne=e("button",{class:"bg-[#F2F3F6] py-1 px-3 rounded-lg"},"Cancel",-1),Ve={__name:"index",setup(ae){const r=R(),f=j(),s=K({record:!1,preview:!1,menu:!1,menutab:!1,type:"",pageY:"",pageX:"",raw_type:{word:Z,excel:Q,powerpoint:e2}});let m=N(""),w=[];var M={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:"audio/webm"};function x(n){var a;r.create.text=(a=n.target.value)==null?void 0:a.trim()}function L(n){const a=n.target.files[0];r.create.file=a,s.preview=URL.createObjectURL(r.create.file),s.type=f.getFileType(r.create.file.name),r.create.file_type.name=a.name,r.create.file_type.size=a.size,r.create.file_type.type=s.type}function E(){s.record=!1,m.value.stop()}function y(){if(s.record){m.value.stop();return}r.sendMessage()}const B=async()=>{try{const n=await navigator.mediaDevices.getUserMedia({audio:!0});n.active===!0&&(s.record=!0,m.value=new MediaRecorder(n,M),m.value.ondataavailable=a=>{if(w.push(a.data),m.value.state=="inactive"&&s.record){let d=new Blob(w,{type:"audio/webm"});console.log(d);let p="recorded_audio.webm";r.create.file=new File([d],p,{type:"audio/webm"}),console.log(r.create.file),s.record=!1,r.sendMessage()}},m.value.start())}catch(n){n&&console.log(n)}};return X(()=>r.create.text,()=>{r.create.text&&document.getElementById("message_input").classList.add("caret_color")}),Y(()=>{r.getAll(),r.getAllGroups(),window.addEventListener("paste",function(n){var a=Array.from(n.clipboardData.items).find(p=>/^image\//.test(p.type));if(a){var d=a.getAsFile();s.preview=URL.createObjectURL(d)}}),window.addEventListener("contextmenu",function(n){console.log(n.target),s.menutab||(s.menu=!1),s.pageX=n.pageX,s.pageY=n.pageY,n.preventDefault()}),window.addEventListener("click",function(n){s.menutab||(s.menu=!1)})}),G(()=>{window.addEventListener("click",()=>{const n=document.getElementById("targetElement");n?new IntersectionObserver(d=>{d.forEach(p=>{p.isIntersecting&&console.log("Element ekranda ko'rinayotgan bo'lsa")})}).observe(n):console.error("Element topilmadi")})}),(n,a)=>{const d=U,p=A,V=I,D=S;return l(),i("main",t2,[e("section",s2,[o2,(l(!0),i(b,null,k(t(r).store.chatgroups,o=>(l(),i("div",{onClick:()=>{t(r).create.chatgroup_id=o.id,t(r).getAll()},class:v([t(r).create.chatgroup_id==o.id?"bg-[#FFF5E9]":"","flex gap-[10px] py-[10px] px-5 -mx-5 cursor-pointer"])},[i2,e("div",l2,[e("div",n2,[e("p",a2,c(o.title),1),c2]),d2])],10,r2))),256))]),e("section",p2,[_2,e("div",u2,[m2,(l(!0),i(b,null,k(t(r).store.data,(o,H)=>{var C;return l(),i("div",null,[g(V,{trigger:["contextmenu"]},{overlay:_(()=>[g(p,null,{default:_(()=>[g(d,{onClick:t(r).store.chat_id,key:"1"},{default:_(()=>[u("Edit")]),_:1},8,["onClick"]),g(d,{onClick:()=>{t(r).store.chat_id=o.id,t(r).deleteMessage()},key:"2"},{default:_(()=>[u("Delete")]),_:2},1032,["onClick"]),g(d,{key:"3"},{default:_(()=>[u("Reply")]),_:1})]),_:2},1024)]),default:_(()=>[e("div",{class:v([t(f).user.data.id==o.user_id?"ml-auto bg-[#FFD1B2] border-r-3":"bg-[#F2F3F6] border-l-3","flex items-end gap-3 max-w-[60%] w-fit p-[10px] shadow_message"])},[e("div",null,[o.file?(l(),i("div",h2,[o.file_type.type[0]=="audio"?(l(),i("audio",g2,[e("source",{src:o.file,type:"audio/ogg"},null,8,f2),e("source",{src:o.file,type:"audio/mpeg"},null,8,v2),u(" Audio not supported ")])):o.file_type.type[0]=="video"?(l(),i("video",w2,[e("source",{src:o.file,type:"video/mp4"},null,8,x2),e("source",{src:o.file,type:"video/ogg"},null,8,y2),u(" Video not supported ")])):o.file_type.type[0]=="raw"?(l(),i("a",{key:2,href:o.file,download:"",class:"flex items-center gap-2 min-w-[150px] bg-[#F2F3F6] rounded-lg"},[e("img",{class:"h-8 w-8",src:t(s).raw_type[o.file_type.type[1]],alt:""},null,8,b2),e("div",null,[e("p",null,c(o.file_type.name),1),e("p",k2,c(o.file_type.size)+" KB ",1)])],8,C2)):o.file_type.type[0]=="image"?(l(),i("div",F2,[e("img",{src:`${o.file}`,class:"overflow-hidden max-w-[300px]",alt:""},null,8,M2)])):o.file_type.type[0]=="pdf"?(l(),i("div",L2,[e("div",E2,[B2,e("div",null,[e("p",null,c(o.file_type.name),1),e("p",V2,c(o.file_type.size)+" KB ",1)])])])):h("",!0)])):h("",!0),o.text?(l(),i("pre",D2,c(o.text),1)):h("",!0)]),H2],2)]),_:2},1024),((C=t(r).store.data[H+1])==null?void 0:C.user_id)!=o.user_id?(l(),i("div",{key:0,class:v([t(f).user.data.id==o.user_id?"justify-end":"","flex items-center gap-3 mt-3"])},[e("img",{class:"w-5 h-5 rounded-full object-cover",src:o.user.image,alt:""},null,8,R2)],2)):h("",!0)])}),256))]),j2,e("input",{onChange:L,id:"upload_image",class:"h-0 w-0 overflow-hidden p-0 border-0",type:"file"},null,32),e("nav",z2,[t(s).record?(l(),i("img",{key:1,onClick:E,class:"w-5 h-5 cursor-pointer",src:$,alt:""})):(l(),i("label",Z2,U2)),t(s).record?(l(),i("div",A2,K2)):(l(),i("textarea",{key:2,onInput:x,id:"message_input",class:"border-none !px-2 w-full",placeholder:"Xabar yuboring"},null,32)),t(s).record?h("",!0):(l(),i("img",N2)),t(r).create.text||t(s).record?(l(),i("img",{key:5,onClick:y,class:"cursor-pointer",src:W,alt:""})):(l(),i("img",{key:6,onClick:B,class:"cursor-pointer",src:q,alt:""}))])]),g(D,{class:"max-w-[340px]",open:t(s).preview,"onUpdate:open":a[0]||(a[0]=o=>t(s).preview=o),centered:""},{default:_(()=>[e("p",X2," Send "+c(t(s).type[0]=="raw"?t(s).type[1]:t(s).type[0]),1),t(s).type[0]=="audio"?(l(),i("audio",Y2,[e("source",{src:t(s).preview,type:"audio/ogg"},null,8,G2),e("source",{src:t(s).preview,type:"audio/mpeg"},null,8,O2),u(" Audio not supported ")])):t(s).type[0]=="video"?(l(),i("video",T2,[e("source",{src:t(s).preview,type:"video/mp4"},null,8,$2),e("source",{src:t(s).preview,type:"video/ogg"},null,8,P2),u(" Video not supported ")])):t(s).type[0]=="raw"?(l(),i("div",J2,[e("img",{class:"h-8 w-8",src:t(s).raw_type[t(s).type[1]],alt:""},null,8,W2),e("div",null,[e("p",null,c(t(r).create.file_type.name),1),e("p",q2,c(t(r).create.file_type.size)+" KB ",1)])])):t(s).type[0]=="image"?(l(),i("div",Q2,[e("img",{class:"max-w-[300px] max-h-[300px] object-contain",src:t(s).preview},null,8,ee)])):t(s).type[0]=="pdf"?(l(),i("div",te,[e("div",se,[oe,e("div",null,[e("p",null,c(t(r).create.file_type.name),1),e("p",re,c(t(r).create.file_type.size)+" KB ",1)])])])):h("",!0),e("div",ie,[le,e("textarea",{id:"caption",onInput:x,class:"border-0 border-b caption !rounded-none p-0 w-[300px]"},null,32)]),e("div",{class:"flex justify-between mt-2"},[ne,e("button",{onClick:y,class:"bg-[#FFD1B2] py-1 px-3 rounded-lg"}," Send ")])]),_:1},8,["open"])])}}};export{Ve as default};
